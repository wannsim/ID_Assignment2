<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Lao Niang Cooks</title>
    <link href="./style.css" rel="stylesheet" type="text/css" />
    <link href="Normalize.css" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  </head>
  <body>
   

     <section class = "wholeLogin">
        <div class = "wrapper">
          <nav class="closeIcon">
            <a href = "Profilepage.html"><ion-icon name="close-outline"></ion-icon></a>
          </nav>
          <!-- login -->
            <div class = "loginContainer" >
                <h2>Login</h2>
                <form action="login.html" method="get">
                    <div class = "inputBox">
                        <label class = "emailLabel">Email: </label>
                        <input class = "emailInput" id = "emailinput" name = "emailinput" type = "email" required>
                    </div>
                    <div class = "inputBox">
                        <label class = "pwLabel">Password: </label>
                        <input class = "pw" id= "pw" name = "pw" type = "password" required >
                    </div>
                    <!-- <div class="remember-forgot">
                        <label><input type = "checkbox" > Remember me</label>
                        <a href = "#"> Forgot password?</a>
                    </div> -->
                    <div class = "loginBtnInput" >
                        <button onclick='javascript:getMember1();' type = "button" class = "submitLogin">Login</button>
                    </div>

                    <!-- <button type = "submit" class = "submitLogin">Login</button> -->
                    <div class = "login-register">
                        <p>
                            Don't have an account?<a href = "register.html" class = "registerNav"> Register</a>
                        </p>
                    </div>
                </form>
            </div>



        </div>
    </section>
    <script>
 function getMember1(){
    let settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": "https://laoniangcooks-9a89.restdb.io/rest/member?q={}",
                    "method": "GET",
                    "headers": {
                    "content-type": "application/json",
                    "x-apikey": "63e4e788478852088da67f34",
                    "cache-control": "no-cache"
                    }
                }
   
            
           $.ajax(settings).done(function (response) {
                    let content = "";
                    //input of username and pw
                    let emailinput = $("#emailinput").val();
                    console.log(emailinput);
                    let pwinput = $("#pw").val();
                    console.log(pwinput);
                    var recordfound = 0;
                    for (var i = 0; i < response.length; i++) {
                        console.log(response[i].email);
                        if ((response[i].email == emailinput) && (response[i].password == pwinput)){
                                recordfound = 1;
                                document.location = "profilepage.html";
                        }
                       
                    }
                    if (recordfound == 0){
                        alert("Incorrect login. Please check your username and password.");
                    }
                    
                })
    
            }
    </script>

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  </body>
</html>