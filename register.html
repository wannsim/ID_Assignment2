<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Lao Niang Cooks</title>
    <link href="./style.css" rel="stylesheet" type="text/css" />
    <link href="Normalize.css" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  </head>
  <body>
   

     <section class = "wholeLogin">
        <div class = "wrapper">
          <nav class="closeIcon">
            <a href = "Profilepage.html"><ion-icon name="close-outline"></ion-icon></a>
          </nav>


            <!-- register -->
            <div class = "registerContainer">
              <h2>Register</h2>
              <form class = "registerForm" action="register.html">
                <div class = "inputBox">
                  <label class = "userNLabel">UserName: </label>
                  <input type = "text" id= "username" name = "username" required>
              </div>
                  <div class = "inputBox">
                      <label class = "emailLabel">Email: </label>
                      <input type = "email" id = "emailinput" name = "emailinput"required>
                  </div>
                  <div class = "inputBox">
                      <label class = "pwLabel">Password: </label>
                      <input class = "pw" id= "pw" name = "pw" type = "password" required >
                  </div>
                  <div class="remember-forgot">
                      <label><input type = "checkbox" required> Agree to terms and conditions</label>
                  </div>
                  <div class = "loginBtnInput" >
                    <button onclick='javascript:updateMember();' type = "button" class = "submitLogin">Register</button>
                </div>
                  
                  <div class = "login-register">
                      <p>
                          Already have an account?<a href = "logIn.html" class = "loginNav"> Login</a>
                      </p>
                  </div>
              </form>
          </div>
        </div>
    </section>


    <script>
      function updateMember(){
        let username = $("#username").val();
        let emailinput = $("#emailinput").val();
        let pwinput = $("#pw").val();
        let jsondata = {
          "userName": username,
          "email": emailinput, 
          "password":  pwinput
        }
        let settings = {
          "async": true,
          "crossDomain": true,
          "url": "https://laoniangcooks-9a89.restdb.io/rest/member",
          "method": "POST",
          "headers": {
            "content-type": "application/json",
            "x-apikey": "63e4e788478852088da67f34",
            "cache-control": "no-cache"
          },
          "processData": false,
          "data": JSON.stringify(jsondata)

          }
        

        $.ajax(settings).done(function (response) {
          document.location = "logIn.html";
          alert("Registration successful!")
        })
      }
        // var jsondata = {"userName": username,"email": emailinput, "password":  pwinput};
        // var settings = {
        //   "async": true,
        //   "crossDomain": true,
        //   "url": "https://laoniangcooks-9a89.restdb.io/rest/member/(userName)",
        //   "method": "PUT",
        //   "headers": {
        //     "content-type": "application/json",
        //     "x-apikey": "63e4e788478852088da67f34",
        //     "cache-control": "no-cache"
        //   },
        //   "processData": false,
        //   "data": JSON.stringify(jsondata)
        // }
      

       
                 
                // $.ajax(settings).done(function (response) {
                //          let content = "";
                //          //input of username and pw
                //          let emailinput = $("#emailinput").val();
                //          let pwinput = $("#pw").val();
                //          var recordfound = 0;
                //          for (var i = 0; i < response.length; i++) {
                //              if ((response[i].email == emailinput) && (response[i].password == pwinput)){
                //                      recordfound = 1;
                //                      document.location = "profilepage.html";
                //                      alert("Login successful!")
                //              }
                            
                //          }
                //          if (recordfound == 0){
                //              alert("Incorrect login. Please check your username and password.");
                //          }
                         
                //      })
         
                //  }
         </script>
     

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  </body>
</html>
